{"version":3,"sources":["background/delaunay.js","background/moving-triangles.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["pointInCircle","a","b","c","p","dx","x","dy","y","ex","ey","fx","fy","ap","bp","cp","sign","p1","p2","p3","pointInTriangle","pt","v1","v2","v3","d1","d2","d3","has_neg","has_pos","Node","key","vertices","children","node","push","TriangleGraph","nodes","Map","set","parentKeys","length","newNode","undefined","forEach","parentKey","parentNode","get","addChild","values","size","Vertex","pos","incEdge","id","HalfEdge","origin","twin","incFace","next","prev","Face","graphKey","Delaunay","points","debugCtx","halfEdges","faces","FAR_AWAY","tempPositions","i","triangleGraph","triangulate","point","triangle","containingTriangle","splitTriangle","newVertex","affectedEdges","edge","legalizeEdge","newHalfEdges","leftEdge","e1","e2","outerFaceEdges","getFaceHalfEdges","newFaces","e3","newFace","addNode","console","error","concat","face","adjacentFace","testPoint","incFaceEdge1","incFaceEdge2","faceEdge1","faceEdge2","getFaceVertices","currentNode","safety","foundChild","child","edges","Error","log","triangles","triangleIterator","getValues","value","ctx","beginPath","canvas","width","height","moveTo","lineTo","strokeStyle","lineWidth","stroke","Circle","color","radius","position","staticObject","visible","rotationSpeed","curveRate","angle","Math","random","PI","dAngle","rotationDirection","cos","sin","arc","fillStyle","fill","main","document","getElementById","getContext","resizeCanvas","fps","circleColor","drawEdges","lineColor","triangleColorGradient","numCircles","floor","clientWidth","clientHeight","circleCurveRateRange","circleSpeedRange","circleRadiusRange","min","circles","idCounter","delaunay","setupScene","createCircles","circlesUpdated","setInterval","update","requestAnimationFrame","render","resized","draw","fillRect","delaunayData","getTriangleData","drawTriangles","realToCSSPixels","window","devicePixelRatio","displayWidth","displayHeight","j","edgeCircle","circle","getGradientColor","color1","color2","ratio","w1","w2","rgb","round","heightRatio","getTriangleMidpoint","join","max","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"moving-triangles.f2a0e8a5.js","sourceRoot":"../src","sourcesContent":["function pointInCircle(a, b, c, p) {\n  const dx = a.x - p.x;\n  const dy = a.y - p.y;\n  const ex = b.x - p.x;\n  const ey = b.y - p.y;\n  const fx = c.x - p.x;\n  const fy = c.y - p.y;\n\n  const ap = dx * dx + dy * dy;\n  const bp = ex * ex + ey * ey;\n  const cp = fx * fx + fy * fy;\n\n  return (\n    dx * (ey * cp - bp * fy) -\n      dy * (ex * cp - bp * fx) +\n      ap * (ex * fy - ey * fx) <\n    0\n  );\n}\n\nfunction sign(p1, p2, p3) {\n  return (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);\n}\n\nfunction pointInTriangle(pt, v1, v2, v3) {\n  const d1 = sign(pt, v1, v2);\n  const d2 = sign(pt, v2, v3);\n  const d3 = sign(pt, v3, v1);\n\n  const has_neg = d1 < 0 || d2 < 0 || d3 < 0;\n  const has_pos = d1 > 0 || d2 > 0 || d3 > 0;\n\n  return !(has_neg && has_pos);\n}\n\n/* \n  Directed Acylic Graph\n\n  Used to find what triangle a point is within\n*/\nclass Node {\n  constructor(key, vertices) {\n    this.key = key;\n    this.vertices = vertices;\n    this.children = [];\n  }\n\n  addChild(node) {\n    this.children.push(node);\n  }\n}\n\nclass TriangleGraph {\n  constructor(key, vertices) {\n    this.nodes = new Map();\n    this.nodes.set(key, new Node(key, vertices));\n  }\n\n  addNode(parentKeys, key, vertices) {\n    if (parentKeys.length == 0) return false;\n    let newNode = undefined;\n    parentKeys.forEach((parentKey) => {\n      const parentNode = this.nodes.get(parentKey);\n      if (parentNode) {\n        if (newNode == undefined) {\n          newNode = new Node(key, vertices);\n          this.nodes.set(key, newNode);\n        }\n        parentNode.addChild(newNode);\n      }\n    });\n    return true;\n  }\n\n  getValues() {\n    return this.nodes.values();\n  }\n\n  size() {\n    return this.nodes.size;\n  }\n}\n\nclass Vertex {\n  constructor(pos, incEdge, id) {\n    this.pos = pos;\n    this.incEdge = incEdge;\n    this.id = id;\n  }\n}\n\nclass HalfEdge {\n  constructor({ origin, twin, incFace, next, prev }) {\n    this.origin = origin;\n    this.twin = twin;\n    this.incFace = incFace;\n    this.next = next;\n    this.prev = prev;\n  }\n}\n\nclass Face {\n  constructor(incEdge, graphKey) {\n    this.incEdge = incEdge;\n    this.graphKey = graphKey;\n  }\n}\n\nclass Delaunay {\n  constructor(points, debugCtx) {\n    this.points = points;\n    this.debugCtx = debugCtx;\n\n    this.vertices = [];\n    this.halfEdges = [];\n    this.faces = []; // Contains index of a half-edge belonging to that face\n\n    // Create triangle base triangle that \"encapsulates\" all points\n    const FAR_AWAY = 100000;\n    const tempPositions = [\n      { x: -FAR_AWAY, y: -FAR_AWAY },\n      { x: 500, y: FAR_AWAY },\n      { x: FAR_AWAY, y: -FAR_AWAY },\n    ];\n    for (let i = 0; i < 3; i++) {\n      //this.vertices.push(new Vertex(`p${i}`, undefined));\n      this.vertices.push(\n        new Vertex(tempPositions[i], undefined, this.vertices.length)\n      );\n    }\n    for (let i = 0; i < 6; i++) {\n      this.halfEdges.push(\n        new HalfEdge({\n          origin: undefined,\n          twin: undefined,\n          incFace: undefined,\n          next: undefined,\n          prev: undefined,\n        })\n      );\n    }\n    this.faces.push(new Face(this.halfEdges[0], 0));\n    this.triangleGraph = new TriangleGraph(0, tempPositions);\n\n    // Now fill in proper values\n    this.vertices[0].incEdge = this.halfEdges[0];\n    this.vertices[1].incEdge = this.halfEdges[1];\n    this.vertices[2].incEdge = this.halfEdges[2];\n\n    this.halfEdges[0].origin = this.vertices[0];\n    this.halfEdges[0].twin = this.halfEdges[3];\n    this.halfEdges[0].incFace = this.faces[0];\n    this.halfEdges[0].next = this.halfEdges[1];\n    this.halfEdges[0].prev = this.halfEdges[2];\n\n    this.halfEdges[1].origin = this.vertices[1];\n    this.halfEdges[1].twin = this.halfEdges[4];\n    this.halfEdges[1].incFace = this.faces[0];\n    this.halfEdges[1].next = this.halfEdges[2];\n    this.halfEdges[1].prev = this.halfEdges[0];\n\n    this.halfEdges[2].origin = this.vertices[2];\n    this.halfEdges[2].twin = this.halfEdges[5];\n    this.halfEdges[2].incFace = this.faces[0];\n    this.halfEdges[2].next = this.halfEdges[0];\n    this.halfEdges[2].prev = this.halfEdges[1];\n\n    this.halfEdges[3].origin = this.vertices[1];\n    this.halfEdges[3].twin = this.halfEdges[0];\n    this.halfEdges[3].incFace = null;\n    this.halfEdges[3].next = this.halfEdges[4];\n    this.halfEdges[3].prev = this.halfEdges[5];\n\n    this.halfEdges[4].origin = this.vertices[2];\n    this.halfEdges[4].twin = this.halfEdges[1];\n    this.halfEdges[4].incFace = null;\n    this.halfEdges[4].next = this.halfEdges[5];\n    this.halfEdges[4].prev = this.halfEdges[3];\n\n    this.halfEdges[5].origin = this.vertices[0];\n    this.halfEdges[5].twin = this.halfEdges[2];\n    this.halfEdges[5].incFace = null;\n    this.halfEdges[5].next = this.halfEdges[3];\n    this.halfEdges[5].prev = this.halfEdges[4];\n\n    this.triangulate();\n  }\n\n  triangulate() {\n    for (let i = 0; i < this.points.length; i++) {\n      const point = this.points[i];\n      const triangle = this.containingTriangle(point);\n      if (triangle === undefined) break;\n\n      /* Need case for when point lies on edge of triangle? */\n\n      const [newVertex, affectedEdges] = this.splitTriangle(point, triangle);\n\n      affectedEdges.forEach((edge) => {\n        this.legalizeEdge(newVertex, edge);\n      });\n    }\n  }\n\n  splitTriangle(point, triangle) {\n    // First create new vertex from point\n    const newVertex = new Vertex(point, undefined, this.vertices.length);\n\n    // Next create half-edges\n    let newHalfEdges = [];\n    for (let i = 0; i < 6; i++) {\n      let leftEdge = i % 2 == 0 ? true : false;\n      newHalfEdges.push(\n        new HalfEdge({\n          origin: leftEdge ? newVertex : undefined,\n          twin: undefined,\n          incFace: undefined,\n          next: undefined,\n          prev: undefined,\n        })\n      );\n    }\n    // Assign half-edge twins\n    for (let i = 0; i < 3; i++) {\n      const e1 = newHalfEdges[i * 2];\n      const e2 = i == 0 ? newHalfEdges[5] : newHalfEdges[i * 2 - 1];\n      e1.twin = e2;\n      e2.twin = e1;\n    }\n\n    // Now create each new face and re-assign relevant next/prev edges\n    const outerFaceEdges = this.getFaceHalfEdges(triangle);\n    let newFaces = [];\n    for (let i = 0; i < 3; i++) {\n      let e1 = outerFaceEdges[i];\n      let e2 = newHalfEdges[i * 2 + 1];\n      let e3 = newHalfEdges[i * 2];\n      const newFace = new Face(e3, this.faces.length + i);\n\n      e2.origin = e1.next.origin;\n\n      e1.next = e2;\n      e1.prev = e3;\n      e1.incFace = newFace;\n      e2.next = e3;\n      e2.prev = e1;\n      e2.incFace = newFace;\n      e3.next = e1;\n      e3.prev = e2;\n      e3.incFace = newFace;\n\n      newFaces.push(newFace);\n      const vertices = [e1.origin.id, e2.origin.id, e3.origin.id];\n      if (\n        !this.triangleGraph.addNode(\n          [triangle.graphKey],\n          newFace.graphKey,\n          vertices\n        )\n      ) {\n        console.error(\"Error adding face to triangle graph:\", newFace);\n      }\n    }\n\n    // Point vertex to first new half-edge\n    newVertex.incEdge = newHalfEdges[0];\n\n    // Add new items\n    this.vertices.push(newVertex);\n    this.halfEdges = this.halfEdges.concat(newHalfEdges);\n    this.faces = this.faces.concat(newFaces);\n\n    return [newVertex, outerFaceEdges];\n  }\n\n  legalizeEdge(newVertex, edge) {\n    const face = edge.incFace;\n    const adjacentFace = edge.twin.incFace;\n    if (adjacentFace == null) {\n      return;\n    } else {\n      // Check if edge needs to be flipped\n      const testPoint = edge.twin.prev.origin.pos;\n      if (\n        pointInCircle(\n          newVertex.pos,\n          edge.origin.pos,\n          edge.twin.origin.pos,\n          testPoint\n        )\n      ) {\n        const incFaceEdge1 = edge.twin.prev;\n        const incFaceEdge2 = edge.twin.next;\n        const faceEdge1 = edge.next;\n        const faceEdge2 = edge.prev;\n\n        // Flip edge\n        edge.next = incFaceEdge1;\n        edge.prev = faceEdge1;\n        edge.twin.next = faceEdge2;\n        edge.twin.prev = incFaceEdge2;\n        edge.origin = faceEdge2.origin;\n        edge.twin.origin = incFaceEdge1.origin;\n\n        // Correct Edges\n        incFaceEdge1.prev = edge;\n        incFaceEdge1.next = faceEdge1;\n        faceEdge1.prev = incFaceEdge1;\n        faceEdge1.next = edge;\n\n        faceEdge2.prev = edge.twin;\n        faceEdge2.next = incFaceEdge2;\n        incFaceEdge2.prev = faceEdge2;\n        incFaceEdge2.next = edge.twin;\n\n        // Create two new faces\n        const newFaces = [\n          new Face(faceEdge2, this.faces.length),\n          new Face(faceEdge1, this.faces.length + 1),\n        ];\n        edge.twin.incFace = newFaces[0];\n        faceEdge2.incFace = newFaces[0];\n        incFaceEdge2.incFace = newFaces[0];\n        edge.incFace = newFaces[1];\n        incFaceEdge1.incFace = newFaces[1];\n        faceEdge1.incFace = newFaces[1];\n\n        for (const newFace of newFaces) {\n          const [v1, v2, v3] = this.getFaceVertices(newFace);\n          if (\n            !this.triangleGraph.addNode(\n              [face.graphKey, adjacentFace.graphKey],\n              newFace.graphKey,\n              [v1.id, v2.id, v3.id]\n            )\n          ) {\n            console.error(\"Error adding face to triangle graph:\", newFace);\n          }\n          this.faces.push(newFace);\n        }\n\n        // Since edge flip could have affected triangles next to original adjacent triangle, check them\n        this.legalizeEdge(newVertex, incFaceEdge1);\n        this.legalizeEdge(newVertex, incFaceEdge2);\n      }\n    }\n  }\n\n  containingTriangle(point) {\n    let currentNode = this.triangleGraph.nodes.get(0);\n    let safety = 0;\n    while (currentNode.children.length > 0) {\n      let foundChild = false;\n      for (const child of currentNode.children) {\n        //const vertices = child.vertices;\n        const vertices = [\n          this.vertices[child.vertices[0]].pos,\n          this.vertices[child.vertices[1]].pos,\n          this.vertices[child.vertices[2]].pos,\n        ];\n        if (pointInTriangle(point, vertices[0], vertices[1], vertices[2])) {\n          currentNode = child;\n          foundChild = true;\n          break;\n        }\n      }\n      if (!foundChild) {\n        console.error(\"Uh oh. Triangle had children but none matched.\", point);\n        return undefined;\n      }\n\n      safety++;\n      if (safety > 10000) {\n        console.error(\"Infinite loop here\");\n        break;\n      }\n    }\n    return this.faces[currentNode.key];\n  }\n\n  getFaceHalfEdges(face) {\n    let edges = [face.incEdge];\n    let edge = edges[0];\n\n    let safety = 0;\n    while (edge.next.origin != edges[0].origin) {\n      edges.push(edge.next);\n      edge = edge.next;\n\n      safety++;\n      if (safety > 10000) {\n        console.error(\"Infinite loop here\");\n        break;\n      }\n    }\n    return edges;\n  }\n\n  getFaceVertices(face) {\n    let edge = face.incEdge;\n    let vertices = [edge.origin];\n\n    let safety = 0;\n    while (edge.next.origin != vertices[0]) {\n      edge = edge.next;\n      vertices.push(edge.origin);\n\n      safety++;\n      if (safety > 10000) {\n        throw new Error(\"Infinite loop here\");\n      }\n    }\n    return vertices;\n  }\n\n  printFace(face) {\n    const edges = this.getFaceHalfEdges(face);\n    console.log(\"FACE INDEX:\", face);\n    for (let i = 0; i < edges.length; i++) {\n      console.log(edges[i].origin.pos, \"TO\", edges[i].twin.origin.pos);\n      console.log(edges[i]);\n    }\n  }\n\n  getTriangleData() {\n    let vertices = [];\n    for (let i = 3; i < this.vertices.length; i++) {\n      vertices.push(this.vertices[i].pos);\n    }\n    let triangles = [];\n    const triangleIterator = this.triangleGraph.getValues();\n    for (let i = 0; i < this.triangleGraph.size(); i++) {\n      const triangle = triangleIterator.next().value;\n      if (triangle.children.length != 0) continue;\n      const [v1, v2, v3] = triangle.vertices;\n      if (v1 < 3 || v2 < 3 || v3 < 3) continue;\n      triangles.push([v1 - 3, v2 - 3, v3 - 3]);\n    }\n    return { vertices: vertices, triangles: triangles };\n  }\n\n  debugDraw(ctx) {\n    // // Clear canvas\n    // ctx.fillStyle = \"#f0f0f0\";\n    // ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    for (const face of this.faces) {\n      const edges = this.getFaceHalfEdges(face);\n      for (const edge of edges) {\n        ctx.beginPath();\n        let v1 = [edge.origin.pos.x, edge.origin.pos.y];\n        let v2 = [edge.twin.origin.pos.x, edge.twin.origin.pos.y];\n        let p1 = [ctx.canvas.width * -5, ctx.canvas.height * -5];\n        let p2 = [ctx.canvas.width * 5, ctx.canvas.height * -5];\n        let p3 = [ctx.canvas.width / 2, ctx.canvas.height * 5];\n        if (typeof edge.origin.pos === \"string\") {\n          if (edge.origin.pos === \"p0\") {\n            v1 = p1;\n          } else if (edge.origin.pos === \"p1\") {\n            v1 = p2;\n          } else {\n            v1 = p3;\n          }\n        }\n        if (typeof edge.twin.origin.pos === \"string\") {\n          if (edge.twin.origin.pos === \"p0\") {\n            v2 = p1;\n          } else if (edge.twin.origin.pos === \"p1\") {\n            v2 = p2;\n          } else {\n            v2 = p3;\n          }\n        }\n\n        ctx.moveTo(v1[0], v1[1]);\n        ctx.lineTo(v2[0], v2[1]);\n        ctx.strokeStyle = \"green\";\n        ctx.lineWidth = 2;\n        ctx.stroke();\n      }\n    }\n  }\n}\n\nexport default Delaunay;\n","import Delaunay from \"./delaunay\";\n\nclass Circle {\n  constructor({\n    id,\n    color,\n    radius,\n    position,\n    staticObject,\n    visible,\n    rotationSpeed,\n    curveRate,\n  }) {\n    this.id = id;\n    this.color = color;\n    this.radius = radius;\n    this.position = position;\n    this.staticObject = staticObject;\n    this.visible = visible;\n\n    this.angle = Math.random() * Math.PI * 2;\n    this.dAngle = (Math.random() > 0.5 ? 1 : -1) * curveRate;\n    this.rotationDirection = {\n      x: (Math.random() > 0.5 ? 1 : -1) * rotationSpeed,\n      y: (Math.random() > 0.5 ? 1 : -1) * rotationSpeed,\n    };\n  }\n\n  update(canvas) {\n    if (this.staticObject) return;\n\n    this.position.x +=\n      this.rotationDirection.x * Math.cos(this.angle + this.dAngle);\n    this.position.y +=\n      this.rotationDirection.y * Math.sin(this.angle + this.dAngle);\n\n    this.angle += this.dAngle;\n    if (this.angle >= Math.PI * 2) {\n      this.angle = 0;\n    }\n    if (Math.random() > 0.99) {\n      this.dAngle *= -1;\n    }\n    if (\n      this.position.x - this.radius < 0 ||\n      this.position.x + this.radius > canvas.width\n    ) {\n      this.rotationDirection.x *= -1;\n    }\n    if (\n      this.position.y - this.radius < 0 ||\n      this.position.y + this.radius > canvas.height\n    ) {\n      this.rotationDirection.y *= -1;\n    }\n  }\n\n  draw(ctx) {\n    if (!this.visible) return;\n    ctx.beginPath();\n    ctx.arc(this.position.x, this.position.y, this.radius, 0, 2 * Math.PI);\n    ctx.fillStyle = this.color;\n    ctx.fill();\n  }\n}\n\nconst main = (function () {\n  const canvas = document.getElementById(\"background-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n\n  resizeCanvas(canvas);\n\n  // Constants\n  const fps = 60;\n  const circleColor = \"#edededbb\";\n  const drawEdges = false;\n  const lineColor = \"#B5B0FB66\";\n  const lineWidth = 1;\n  // const triangleColorGradient = [\n  //   [87, 75, 250],\n  //   [87, 250, 160],\n  // ];\n  const triangleColorGradient = [\n    [0, 219, 222],\n    [252, 0, 255],\n  ];\n\n  const numCircles = {\n    x: Math.floor(canvas.clientWidth / 150),\n    y: Math.floor(canvas.clientHeight / 150),\n  };\n  const circleCurveRateRange = [0.005, 0.02];\n  const circleSpeedRange = [0.5, 1];\n  const circleRadiusRange = [\n    Math.min(0.0025 * canvas.height, 7),\n    Math.min(0.0065 * canvas.height, 9),\n  ];\n\n  // Non-constants\n  let circles, idCounter, points, delaunay;\n\n  // Setup scene\n  function setupScene() {\n    // Spacing should not be larger on higher-res displays, so use client width and height\n\n    circles = [];\n    idCounter = 0;\n\n    points = [];\n    delaunay = undefined;\n\n    createCircles();\n  }\n\n  setupScene();\n  // Initialize update loop. Locked to specific FPS\n  let circlesUpdated = false;\n  setInterval(update, 1000 / fps);\n\n  requestAnimationFrame(render);\n\n  function update() {\n    const resized = resizeCanvas(canvas);\n    if (resized) {\n      setupScene();\n    }\n    points = [];\n    for (let i = 0; i < circles.length; i++) {\n      circles[i].update(canvas);\n      points.push(circles[i].position);\n    }\n    delaunay = new Delaunay(points, ctx);\n    circlesUpdated = true;\n  }\n\n  function draw() {\n    if (!circlesUpdated) return;\n    if (delaunay === undefined) return;\n    circlesUpdated = false;\n    // Clear canvas\n    ctx.fillStyle = \"#f0f0f0\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    const delaunayData = delaunay.getTriangleData();\n    drawTriangles(\n      ctx,\n      delaunayData.vertices,\n      delaunayData.triangles,\n      drawEdges\n    );\n\n    for (let i = 0; i < circles.length; i++) {\n      circles[i].draw(ctx);\n    }\n  }\n\n  function render() {\n    draw();\n\n    requestAnimationFrame(render);\n  }\n\n  function resizeCanvas(canvas) {\n    var realToCSSPixels = window.devicePixelRatio;\n    // Lookup the size the browser is displaying the canvas in CSS pixels\n    // and compute a size needed to make our drawingbuffer match it in\n    // device pixels.\n    var displayWidth = Math.floor(canvas.clientWidth * realToCSSPixels);\n    var displayHeight = Math.floor(canvas.clientHeight * realToCSSPixels);\n    // Check if the canvas is not the same size.\n    if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\n      // Make the canvas the same size\n      canvas.width = displayWidth;\n      canvas.height = displayHeight;\n      return true;\n    }\n    return false;\n  }\n\n  function createCircles() {\n    circles = [];\n    const dx = canvas.width / (numCircles.x + 1);\n    const dy = canvas.height / (numCircles.y + 1);\n\n    // Create grid of circles\n    for (let i = 0; i <= numCircles.y + 1; i++) {\n      for (let j = 0; j <= numCircles.x + 1; j++) {\n        const pos = { x: j * dx, y: i * dy };\n        const rotationSpeed =\n          Math.random() * (circleSpeedRange[1] - circleSpeedRange[0]) +\n          circleSpeedRange[0];\n        const curveRate =\n          Math.random() * (circleCurveRateRange[1] - circleCurveRateRange[0]) +\n          circleCurveRateRange[0];\n        const edgeCircle =\n          i === 0 || j === 0 || j === numCircles.x + 1 || i === numCircles.y + 1\n            ? true\n            : false;\n        const circle = new Circle({\n          id: idCounter,\n          color: circleColor,\n          radius:\n            Math.random() * (circleRadiusRange[1] - circleRadiusRange[0]) +\n            circleRadiusRange[0],\n          position: pos,\n          rotationSpeed: rotationSpeed,\n          staticObject: edgeCircle ? true : false,\n          visible: edgeCircle ? false : true,\n          curveRate: curveRate,\n        });\n\n        idCounter++;\n        circles.push(circle);\n      }\n    }\n  }\n\n  function getGradientColor(color1, color2, ratio) {\n    var w1 = ratio;\n    var w2 = 1 - w1;\n    var rgb = [\n      Math.round(color1[0] * w1 + color2[0] * w2),\n      Math.round(color1[1] * w1 + color2[1] * w2),\n      Math.round(color1[2] * w1 + color2[2] * w2),\n    ];\n    return rgb;\n  }\n\n  function drawTriangles(ctx, vertices, triangles, drawEdges) {\n    for (let i = 0; i < triangles.length; i++) {\n      const triangle = triangles[i];\n      const [v1, v2, v3] = [\n        vertices[triangle[0]],\n        vertices[triangle[1]],\n        vertices[triangle[2]],\n      ];\n      ctx.beginPath();\n      ctx.moveTo(v1.x, v1.y);\n      ctx.lineTo(v2.x, v2.y);\n      ctx.lineTo(v3.x, v3.y);\n      const heightRatio = getTriangleMidpoint([v1, v2, v3]).y / canvas.height;\n      const color = getGradientColor(\n        triangleColorGradient[0],\n        triangleColorGradient[1],\n        heightRatio\n      );\n      ctx.fillStyle = `rgb(${color.join()})`;\n      ctx.fill();\n\n      ctx.strokeStyle = drawEdges ? circleColor : ctx.fillStyle;\n      ctx.lineTo(v1.x, v1.y);\n\n      ctx.lineWidth = lineWidth;\n      ctx.stroke();\n    }\n  }\n  function getTriangleMidpoint(vertices) {\n    let min = { x: undefined, y: undefined };\n    let max = { x: undefined, y: undefined };\n\n    for (let i = 0; i < vertices.length; i++) {\n      if (vertices[i].x < min.x || min.x === undefined) {\n        min.x = vertices[i].x;\n      }\n      if (vertices[i].x > max.x || max.x === undefined) {\n        max.x = vertices[i].x;\n      }\n      if (vertices[i].y < min.y || min.y === undefined) {\n        min.y = vertices[i].y;\n      }\n      if (vertices[i].y > max.y || max.y === undefined) {\n        max.y = vertices[i].y;\n      }\n    }\n    return { x: (max.x - min.x) / 2 + min.x, y: (max.y - min.y) / 2 + min.y };\n  }\n})();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}